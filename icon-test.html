<!DOCTYPE html>
<html>
<head>
<title>mpOS Icon System — Full Library</title>
<style>
  body { font-family: Tahoma, sans-serif; color: #222; padding: 40px; background: #f0f0f0; }
  h1 { font-size: 18px; margin: 0 0 4px; }
  h2 { font-size: 15px; margin: 24px 0 6px; }
  h3 { font-size: 13px; margin: 20px 0 4px; color: #555; }
  .note { font-size: 12px; color: #666; max-width: 750px; line-height: 1.5; margin: 0 0 16px; }
  .grid { display: flex; gap: 24px; align-items: flex-end; flex-wrap: wrap; }
  .cell { text-align: center; }
  .cell span { display: block; font-size: 10px; margin-top: 4px; color: #888; white-space: nowrap; }
  .desktop-bg { background: #3a6ea5; padding: 20px 28px; margin-bottom: 4px; }
  .desktop-bg .cell span { color: rgba(255,255,255,0.6); }
  .chrome-bg { background: #d4d0c8; padding: 14px 24px; border: 2px outset #fff; margin-bottom: 4px; }
  .chrome-bg .cell span { color: #555; }
  .divider { border-top: 1px solid #ccc; margin: 28px 0; }
  .toc { font-size: 13px; margin: 12px 0 16px; line-height: 2; }
  .toc a { margin-right: 16px; }
  .palette { display: flex; gap: 4px; margin: 8px 0 16px; flex-wrap: wrap; }
  .swatch { width: 48px; height: 24px; border: 1px solid #999; font-size: 8px; display: flex;
            align-items: center; justify-content: center; color: #fff; text-shadow: 0 0 2px #000; }
</style>
</head>
<body>

<h1>mpOS Icon System</h1>
<p class="note">
  512 canvas, flat-middle gradients, 60&deg; lighting, symbol/use architecture.
  Instrument icons: gray face, silver bezel, stroke-width 12.
  Object icons: stroke-width 6. Abstract icons: stroke-width 24.
</p>

<div id="icons"></div>

<script>
let _n = 0;

// ── Color Palette ───────────────────────────────────────────────────
// [top/mid, bottom, stroke] — mpOS icon palette
const C = {
  // Core palette
  sun:    ['#fbbf24','#f59e0b','#f8af18'],
  ice:    ['#86c3db','#5eafcf','#72b9d5'],
  blue:   ['#3392d6','#2477b2','#2885c7'],
  red:    ['#f87171','#dc2626','#ef4444'],
  green:  ['#51cf66','#37b24d','#40c057'],
  gray:   ['#d4d7dd','#bec1c6','#cdd0d5'],
  dark:   ['#6b7280','#374151','#515a68'],
  // Cool palette
  steel:  ['#7a9ec8','#5680a8','#6890b8'],
  teal:   ['#5eafcf','#3e8faf','#4ea0c0'],
  amber:  ['#d4a460','#b48040','#c49250'],
  sage:   ['#6aae7a','#4a8e5a','#5a9e6a'],
  rose:   ['#d47a7a','#b45a5a','#c46a6a'],
  plum:   ['#9a8ab0','#7a6a90','#8a7aa0'],
  gold:   ['#f0b824','#d49408','#e2a616'],
  // Surfaces
  white:  ['#f0f4f8','#e2eaf0','#e8f0f4'],
  fog:    ['#d0d8e2','#c0cad6','#c8d0dc'],
  slate:  ['#5a6878','#384858','#4a5868'],
  // Weather
  cloud:  ['#dce4ee','#c8d4e4','#d0dae8'],
  dkcloud:['#9ca3af','#6b7280','#848b98'],
  wsun:   ['#f0b824','#d49408','#e2a616'],
  rain:   ['#6aabe0','#4a90cc','#5a9dd8'],
  snow:   ['#86c3db','#6eb0ca','#78b9d3'],
  bolt:   ['#f7b23b','#f59e0b','#f6a823'],
  mist:   ['#d0d8e2','#c2ccd8','#c8d0da'],
};

// ── Helpers ─────────────────────────────────────────────────────────
const gr = (p, id, x1, y1, x2, y2, c) =>
  `<linearGradient id="${p}${id}" x1="${x1}" x2="${x2}" y1="${y1}" y2="${y2}" gradientUnits="userSpaceOnUse">` +
  `<stop offset="0" stop-color="${c[0]}"/><stop offset=".5" stop-color="${c[0]}"/><stop offset="1" stop-color="${c[1]}"/></linearGradient>`;

// 60° gradient coords (width-based angle, matches instrument compass)
const gc = (x, y, w, h) => [x + w*0.25, y + h/2 - w*0.433, x + w*0.75, y + h/2 + w*0.433];

// Instrument face: compass gradient coords for r=144 at (256,256)
const INST = [184, 131.3, 328, 380.7];
const instGrad = (p, id='a') => gr(p, id, ...INST, C.dark);
const instCircle = (p, id='a') =>
  `<circle cx="256" cy="256" r="144" fill="url(#${p}${id})" stroke="#e5e7eb" stroke-miterlimit="10" stroke-width="12"/>`;
// Colored instrument: same bezel, custom fill
const cInstGrad = (p, id, c) => gr(p, id, ...INST, c);
const cInstCircle = (p, id='a') =>
  `<circle cx="256" cy="256" r="144" fill="url(#${p}${id})" stroke="#e5e7eb" stroke-miterlimit="10" stroke-width="12"/>`;

function mkSvg(p, defs, body, size) {
  return `<svg width="${size}" height="${size}" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><defs>${defs}</defs>${body}</svg>`;
}

// ══════════════════════════════════════════════════════════════════════
// WEATHER ICONS (mpOS elements + cool palette)
// ══════════════════════════════════════════════════════════════════════

const WG = {
  sun: (p) =>
    `<linearGradient id="${p}sg" x1="73.5" x2="122.5" y1="55.6" y2="140.5" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#f0b824"/><stop offset=".5" stop-color="#f0b824"/><stop offset="1" stop-color="#d49408"/></linearGradient>`,
  cloud: (p) =>
    `<linearGradient id="${p}cg" x1="99.5" x2="232.6" y1="30.7" y2="261.4" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#dce4ee"/><stop offset=".5" stop-color="#dce4ee"/><stop offset="1" stop-color="#c8d4e4"/></linearGradient>`,
  dkcloud: (p) =>
    `<linearGradient id="${p}dg" x1="99.5" x2="232.6" y1="30.7" y2="261.4" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#9ca3af"/><stop offset=".5" stop-color="#9ca3af"/><stop offset="1" stop-color="#6b7280"/></linearGradient>`,
  rain: (p) =>
    gr(p,'r1',0.5,8.5,16.5,56.5,C.rain) + gr(p,'r2',56.5,61.5,72.5,109.5,C.rain) + gr(p,'r3',112.5,26.5,128.5,74.5,C.rain),
  flake: (p) =>
    gr(p,'f1',11.4,5.9,32.8,43.1,C.snow) + gr(p,'f2',67.4,95.9,88.8,133.1,C.snow) + gr(p,'f3',123.4,45.9,144.8,83.1,C.snow),
  bolt: (p) =>
    `<linearGradient id="${p}bg" x1="8.7" x2="80.9" y1="17.1" y2="142.1" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#f7b23b"/><stop offset=".5" stop-color="#f7b23b"/><stop offset="1" stop-color="#f59e0b"/></linearGradient>`,
  fog: (p) =>
    `<linearGradient id="${p}g1" x1="96" x2="168" y1="-2.4" y2="122.3" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#d0d8e2"/><stop offset=".5" stop-color="#d0d8e2"/><stop offset="1" stop-color="#c2ccd8"/></linearGradient>` +
    `<linearGradient id="${p}g2" x1="96" x2="168" y1="-50.4" y2="74.3" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#d0d8e2"/><stop offset=".5" stop-color="#d0d8e2"/><stop offset="1" stop-color="#c2ccd8"/></linearGradient>`
};

const WS = {
  sun: (p) =>
    `<symbol id="${p}s" viewBox="0 0 196 196"><circle cx="98" cy="98" r="49" fill="url(#${p}sg)" stroke="#e2a616" stroke-miterlimit="10" stroke-width="5"/><path fill="none" stroke="#f0b824" stroke-linecap="round" stroke-miterlimit="10" stroke-width="12" d="M98 24.3V6m0 184v-18.3M150.1 45.9l13-13M45.9 150.1l-13 13M45.9 45.9 33 33m130.1 130.1-13-13M6 98h18.3M190 98h-18.3"/></symbol>`,
  cloud: (p) =>
    `<symbol id="${p}c" viewBox="0 0 350 222"><path fill="url(#${p}cg)" stroke="#d0dae8" stroke-miterlimit="10" stroke-width="6" d="m291 107-2.5.1A83.9 83.9 0 00135.6 43 56 56 0 0051 91a56.6 56.6 0 00.8 9A60 60 0 0063 219l4-.2v.2h224a56 56 0 000-112Z"/></symbol>`,
  dkcloud: (p) =>
    `<symbol id="${p}dc" viewBox="0 0 350 222"><path fill="url(#${p}dg)" stroke="#848b98" stroke-miterlimit="10" stroke-width="6" d="m291 107-2.5.1A83.9 83.9 0 00135.6 43 56 56 0 0051 91a56.6 56.6 0 00.8 9A60 60 0 0063 219l4-.2v.2h224a56 56 0 000-112Z"/></symbol>`,
  rain: (p) =>
    `<symbol id="${p}r" viewBox="0 0 129 110"><path fill="url(#${p}r1)" stroke="#5a9dd8" stroke-miterlimit="10" d="M8.5 56.5a8 8 0 01-8-8v-40a8 8 0 0116 0v40a8 8 0 01-8 8Z"/><path fill="url(#${p}r2)" stroke="#5a9dd8" stroke-miterlimit="10" d="M64.5 109.5a8 8 0 01-8-8v-40a8 8 0 0116 0v40a8 8 0 01-8 8Z"/><path fill="url(#${p}r3)" stroke="#5a9dd8" stroke-miterlimit="10" d="M120.5 74.5a8 8 0 01-8-8v-40a8 8 0 0116 0v40a8 8 0 01-8 8Z"/></symbol>`,
  flake: (p) =>
    `<symbol id="${p}f" viewBox="0 0 156.2 139">` +
    `<path fill="url(#${p}f1)" stroke="#78b9d3" stroke-miterlimit="10" d="m41.7 31-5.8-3.3a13.7 13.7 0 000-6.5l5.8-3.2a4 4 0 001.5-5.5 4 4 0 00-5.6-1.5l-5.8 3.3a13.6 13.6 0 00-2.6-2 13.8 13.8 0 00-3-1.3V4.5a4 4 0 00-8.1 0v6.6a14.3 14.3 0 00-5.7 3.2L6.6 11A4 4 0 001 12.5 4 4 0 002.5 18l5.8 3.3a13.7 13.7 0 000 6.5L2.5 31A4 4 0 001 36.5a4 4 0 003.5 2 4 4 0 002-.5l5.8-3.3a13.6 13.6 0 002.6 2 13.8 13.8 0 003 1.2v6.6a4 4 0 008.2 0v-6.6a14.2 14.2 0 005.6-3.2l6 3.3a4 4 0 002 .5 4 4 0 003.4-2 4 4 0 00-1.4-5.5ZM19 29.7a6 6 0 01-2.3-8.2 6.1 6.1 0 015.3-3 6.2 6.2 0 013 .8 6 6 0 012.2 8.2 6.1 6.1 0 01-8.2 2.2Z"/>` +
    `<path fill="url(#${p}f2)" stroke="#78b9d3" stroke-miterlimit="10" d="m97.7 121-5.8-3.3a13.7 13.7 0 000-6.5l5.8-3.2a4 4 0 001.5-5.5 4 4 0 00-5.6-1.5l-5.8 3.3a13.6 13.6 0 00-2.6-2 13.8 13.8 0 00-3-1.3V94.5a4 4 0 00-8.1 0v6.6a14.3 14.3 0 00-5.7 3.2L62.6 101A4 4 0 0057 102.5 4 4 0 0058.5 108l5.8 3.3a13.7 13.7 0 000 6.5L58.5 121A4 4 0 0057 126.5a4 4 0 003.5 2 4 4 0 002-.5l5.8-3.3a13.6 13.6 0 002.6 2 13.8 13.8 0 003 1.2v6.6a4 4 0 008.2 0v-6.6a14.2 14.2 0 005.6-3.2l6 3.3a4 4 0 002 .5 4 4 0 003.4-2 4 4 0 00-1.4-5.5ZM75 119.7a6 6 0 01-2.3-8.2 6.1 6.1 0 015.3-3 6.2 6.2 0 013 .8 6 6 0 012.2 8.2 6.1 6.1 0 01-8.2 2.2Z"/>` +
    `<path fill="url(#${p}f3)" stroke="#78b9d3" stroke-miterlimit="10" d="m153.7 71-5.8-3.3a13.7 13.7 0 000-6.5l5.8-3.2a4 4 0 001.5-5.5 4 4 0 00-5.6-1.5l-5.8 3.3a13.6 13.6 0 00-2.6-2 13.8 13.8 0 00-3-1.3V44.5a4 4 0 00-8.1 0v6.6a14.3 14.3 0 00-5.7 3.2L118.6 51A4 4 0 00113 52.5 4 4 0 00114.5 58l5.8 3.3a13.7 13.7 0 000 6.5L114.5 71A4 4 0 00113 76.5a4 4 0 003.5 2 4 4 0 002-.5l5.8-3.3a13.6 13.6 0 002.6 2 13.8 13.8 0 003 1.2v6.6a4 4 0 008.2 0v-6.6a14.2 14.2 0 005.6-3.2l6 3.3a4 4 0 002 .5 4 4 0 003.4-2 4 4 0 00-1.4-5.5ZM131 69.7a6 6 0 01-2.3-8.2 6.1 6.1 0 015.3-3 6.2 6.2 0 013 .8 6 6 0 012.2 8.2 6.1 6.1 0 01-8.2 2.2Z"/>` +
    `</symbol>`,
  bolt: (p) =>
    `<symbol id="${p}b" viewBox="0 0 102.7 186.8"><path fill="url(#${p}bg)" stroke="#f6a823" stroke-miterlimit="10" stroke-width="4" d="m34.8 2-32 96h32l-16 80 80-112h-48l32-64h-48z"/></symbol>`,
  fog: (p) =>
    `<symbol id="${p}fg" viewBox="0 0 264 72"><path fill="none" stroke="url(#${p}g1)" stroke-linecap="round" stroke-miterlimit="10" stroke-width="24" d="M12 60h240"/><path fill="none" stroke="url(#${p}g2)" stroke-linecap="round" stroke-miterlimit="10" stroke-width="24" d="M12 12h240"/></symbol>`
};

const WEATHER = {
  sun:       { label:'Clear', defs:['sun'], syms:['sun'], body:(p)=>`<use href="#${p}s" width="340" height="340" transform="translate(86 86)"/>` },
  partcloud: { label:'Partly Cloudy', defs:['sun','cloud'], syms:['sun','cloud'], body:(p)=>`<use href="#${p}s" width="196" height="196" transform="translate(68 109)"/><use href="#${p}c" width="350" height="222" transform="translate(81 145)"/>` },
  cloud:     { label:'Overcast', defs:['cloud'], syms:['cloud'], body:(p)=>`<use href="#${p}c" width="350" height="222" transform="translate(81 145)"/>` },
  fog:       { label:'Fog', defs:['cloud','fog'], syms:['cloud','fog'], body:(p)=>`<use href="#${p}c" width="350" height="222" transform="translate(81 145)"/><use href="#${p}fg" width="264" height="72" transform="translate(124 402)"/>` },
  rain:      { label:'Rain', defs:['cloud','rain'], syms:['cloud','rain'], body:(p)=>`<use href="#${p}c" width="350" height="222" transform="translate(81 145)"/><use href="#${p}r" width="129" height="110" transform="translate(191.5 343.5)"/>` },
  snow:      { label:'Snow', defs:['cloud','flake'], syms:['cloud','flake'], body:(p)=>`<use href="#${p}c" width="350" height="222" transform="translate(81 145)"/><use href="#${p}f" width="156.2" height="139" transform="translate(177.9 337.5)"/>` },
  thunder:   { label:'Thunder', defs:['dkcloud','bolt'], syms:['dkcloud','bolt'], body:(p)=>`<use href="#${p}dc" width="350" height="222" transform="translate(81 145)"/><use href="#${p}b" width="102.7" height="186.8" transform="translate(205.2 291)"/>` }
};

function weatherIcon(key, size) {
  const p = 'w' + (_n++) + '-';
  const w = WEATHER[key];
  const defs = w.defs.map(k=>WG[k](p)).join('') + w.syms.map(k=>WS[k](p)).join('');
  return mkSvg(p, defs, w.body(p), size);
}

// ══════════════════════════════════════════════════════════════════════
// APP ICONS — mpOS icon system
//
// Instrument: exact compass/barometer (gray face, #e5e7eb bezel, sw 12)
//   Interior accents: stroke-width 12, bright color
//   Interior structure: stroke-width 6, #9ca3af
//
// Object: filled body + 1-2 details (like thermometer/windsock)
//   Body outline: stroke-width 6
//   Interior details: stroke-width 4-6
//
// Abstract: thick stroked paths (like wind/tornado)
//   Main strokes: stroke-width 24
// ══════════════════════════════════════════════════════════════════════

const APPS = {

  // ── System ──────────────────────────────────────────────────────

  // OBJECT: Monitor — gray (#d4d7dd) body + teal screen
  computer: { label:'My Computer', cat:'System', icon:(p) => {
    const d = gr(p,'m',...gc(108,128,296,200),C.gray) + gr(p,'s',...gc(128,148,256,164),C.teal);
    return { defs:d, body:
      `<rect x="108" y="128" width="296" height="200" rx="16" fill="url(#${p}m)" stroke="${C.gray[2]}" stroke-width="6" stroke-miterlimit="10"/>` +
      `<rect x="128" y="148" width="256" height="164" rx="6" fill="url(#${p}s)"/>` +
      `<line x1="256" y1="328" x2="256" y2="368" stroke="${C.gray[2]}" stroke-width="12" stroke-linecap="round"/>` +
      `<line x1="192" y1="380" x2="320" y2="380" stroke="${C.gray[2]}" stroke-width="12" stroke-linecap="round"/>`
    };
  }},

  // OBJECT: Folder — amber back + gold front (like windsock structural strokes)
  files: { label:'Files', cat:'System', icon:(p) => {
    const d = gr(p,'b',...gc(96,172,320,200),C.amber) + gr(p,'f',...gc(86,232,340,148),C.sun);
    return { defs:d, body:
      `<path d="M110 184h292a12 12 0 0112 12v160a12 12 0 01-12 12H110a12 12 0 01-12-12V196a12 12 0 0112-12Z" fill="url(#${p}b)" stroke="${C.amber[2]}" stroke-width="6" stroke-miterlimit="10"/>` +
      `<path d="M110 184v-22a10 10 0 0110-10h82l18 24" fill="none" stroke="${C.amber[2]}" stroke-width="6" stroke-linejoin="round" stroke-miterlimit="10"/>` +
      `<path d="M98 240h316a12 12 0 0112 12v108a12 12 0 01-12 12H98a12 12 0 01-12-12V252a12 12 0 0112-12Z" fill="url(#${p}f)" stroke="${C.sun[2]}" stroke-width="6" stroke-miterlimit="10"/>`
    };
  }},

  // ABSTRACT: 4 chart bars — stroke-width 36
  taskmanager: { label:'Task Manager', cat:'System', icon:(p) => {
    const d = gr(p,'1',148,144,188,378,C.sage) + gr(p,'2',218,204,258,378,C.sage) +
      gr(p,'3',288,164,328,378,C.sage) + gr(p,'4',358,244,398,378,C.sage);
    return { defs:d, body:
      `<line x1="168" y1="156" x2="168" y2="370" stroke="url(#${p}1)" stroke-width="36" stroke-linecap="round" stroke-miterlimit="10"/>` +
      `<line x1="238" y1="216" x2="238" y2="370" stroke="url(#${p}2)" stroke-width="36" stroke-linecap="round" stroke-miterlimit="10"/>` +
      `<line x1="308" y1="176" x2="308" y2="370" stroke="url(#${p}3)" stroke-width="36" stroke-linecap="round" stroke-miterlimit="10"/>` +
      `<line x1="378" y1="248" x2="378" y2="370" stroke="url(#${p}4)" stroke-width="36" stroke-linecap="round" stroke-miterlimit="10"/>`
    };
  }},

  // ABSTRACT: prompt > + cursor _ — stroke-width 24
  run: { label:'Run', cat:'System', icon:(p) => {
    const d = gr(p,'a',136,166,336,366,C.sage);
    return { defs:d, body:
      `<path d="M152 192l88 64-88 64" fill="none" stroke="url(#${p}a)" stroke-width="24" stroke-linecap="round" stroke-linejoin="round"/>` +
      `<line x1="272" y1="320" x2="376" y2="320" stroke="url(#${p}a)" stroke-width="24" stroke-linecap="round"/>`
    };
  }},

  // ── Productivity ────────────────────────────────────────────────

  // OBJECT: Page — white body, red margin, blue text lines (sw 6)
  notepad: { label:'Notepad', cat:'Productivity', icon:(p) => {
    const d = gr(p,'a',...gc(136,104,240,304),C.white);
    return { defs:d, body:
      `<path d="M144 104h164l68 68v228a12 12 0 01-12 12H144a12 12 0 01-12-12V116a12 12 0 0112-12Z" fill="url(#${p}a)" stroke="${C.gray[2]}" stroke-width="6" stroke-miterlimit="10"/>` +
      `<path d="M308 104v68h68" fill="${C.fog[1]}" stroke="${C.gray[2]}" stroke-width="6" stroke-linejoin="round" stroke-miterlimit="10"/>` +
      `<line x1="184" y1="104" x2="184" y2="412" stroke="${C.red[2]}" stroke-width="4"/>` +
      `<path d="M208 220h148m-148 56h124m-124 56h148" fill="none" stroke="#bec1c6" stroke-width="6" stroke-linecap="round"/>`
    };
  }},

  // OBJECT: Calculator — gray body + teal display + 3 buttons
  calculator: { label:'Calculator', cat:'Productivity', icon:(p) => {
    const d = gr(p,'a',...gc(144,104,224,304),C.gray) + gr(p,'d',...gc(172,132,168,80),C.teal);
    return { defs:d, body:
      `<rect x="144" y="104" width="224" height="304" rx="20" fill="url(#${p}a)" stroke="${C.gray[2]}" stroke-width="6" stroke-miterlimit="10"/>` +
      `<rect x="172" y="132" width="168" height="80" rx="10" fill="url(#${p}d)" stroke="${C.teal[2]}" stroke-width="4" stroke-miterlimit="10"/>` +
      `<circle cx="208" cy="272" r="20" fill="${C.white[0]}" stroke="${C.fog[2]}" stroke-width="4" stroke-miterlimit="10"/>` +
      `<circle cx="272" cy="272" r="20" fill="${C.white[0]}" stroke="${C.fog[2]}" stroke-width="4" stroke-miterlimit="10"/>` +
      `<circle cx="336" cy="272" r="20" fill="${C.sun[0]}" stroke="${C.sun[2]}" stroke-width="4" stroke-miterlimit="10"/>`
    };
  }},

  // OBJECT: Calendar — red header + white body + 2 clips
  calendar: { label:'Calendar', cat:'Productivity', icon:(p) => {
    const d = gr(p,'h',...gc(112,152,288,52),C.red) + gr(p,'b',...gc(112,204,288,188),C.white);
    return { defs:d, body:
      `<rect x="112" y="152" width="288" height="52" rx="12" fill="url(#${p}h)" stroke="${C.red[2]}" stroke-width="6" stroke-miterlimit="10"/>` +
      `<rect x="112" y="204" width="288" height="188" fill="url(#${p}b)" stroke="${C.gray[2]}" stroke-width="4" stroke-miterlimit="10"/>` +
      `<rect x="180" y="128" width="24" height="48" rx="8" fill="${C.gray[0]}" stroke="${C.gray[2]}" stroke-width="4" stroke-miterlimit="10"/>` +
      `<rect x="308" y="128" width="24" height="48" rx="8" fill="${C.gray[0]}" stroke="${C.gray[2]}" stroke-width="4" stroke-miterlimit="10"/>` +
      `<path d="M148 244h216m-216 44h216m-216 44h216M228 216v144m80-144v144" fill="none" stroke="${C.fog[2]}" stroke-width="3"/>`
    };
  }},

  // OBJECT: Sticky note — gold body + fold + text lines
  stickynotes: { label:'Sticky Notes', cat:'Productivity', icon:(p) => {
    const d = gr(p,'a',...gc(124,124,264,264),C.sun);
    return { defs:d, body:
      `<path d="M132 124h248v216l-56 56H132V124Z" fill="url(#${p}a)" stroke="${C.sun[2]}" stroke-width="6" stroke-miterlimit="10"/>` +
      `<path d="M324 340v56h56" fill="${C.amber[1]}" stroke="${C.amber[2]}" stroke-width="4" stroke-miterlimit="10" stroke-linejoin="round"/>` +
      `<path d="M172 204h168m-168 56h140m-140 56h168" fill="none" stroke="${C.amber[2]}" stroke-width="6" stroke-linecap="round"/>`
    };
  }},

  // OBJECT: Magnifying glass — ice ring sw 12 + white lens + gray handle sw 40
  search: { label:'Search', cat:'Productivity', icon:(p) => {
    const d = gr(p,'a',...gc(80,80,228,228),C.ice);
    return { defs:d, body:
      `<circle cx="194" cy="194" r="114" fill="url(#${p}a)" stroke="${C.ice[2]}" stroke-width="12" stroke-miterlimit="10"/>` +
      `<circle cx="194" cy="194" r="72" fill="${C.white[0]}"/>` +
      `<line x1="278" y1="278" x2="400" y2="400" stroke="${C.gray[2]}" stroke-width="40" stroke-linecap="round"/>`
    };
  }},

  // INSTRUMENT: Help — gray compass face + white ? (sw 16) + dot
  help: { label:'Help', cat:'Productivity', icon:(p) => {
    const d = instGrad(p);
    return { defs:d, body:
      instCircle(p) +
      `<path d="M212 196a52 52 0 0188 20c0 28-18 40-36 48v16" fill="none" stroke="#e5e7eb" stroke-width="16" stroke-linecap="round"/>` +
      `<circle cx="256" cy="340" r="12" fill="#e5e7eb"/>`
    };
  }},

  // ── Internet ────────────────────────────────────────────────────

  // INSTRUMENT: Globe — teal face + #e5e7eb bezel sw 12 + white meridians
  wikibrowser: { label:'WikiBrowser', cat:'Internet', icon:(p) => {
    const d = cInstGrad(p, 'a', C.teal);
    return { defs:d, body:
      cInstCircle(p, 'a') +
      `<ellipse cx="256" cy="256" rx="52" ry="132" fill="none" stroke="#e5e7eb" stroke-width="4"/>` +
      `<ellipse cx="256" cy="256" rx="104" ry="132" fill="none" stroke="#e5e7eb" stroke-width="4"/>` +
      `<path d="M118 216h276m-276 40h276m-276 40h276" fill="none" stroke="#e5e7eb" stroke-width="4"/>`
    };
  }},

  // SCENE: Back page (fog) + front page (slate) + white text lines
  archivebrowser: { label:'Archive Browser', cat:'Internet', icon:(p) => {
    const d = gr(p,'b',...gc(152,120,208,272),C.fog) + gr(p,'f',...gc(132,148,208,272),C.slate);
    return { defs:d, body:
      `<rect x="152" y="120" width="208" height="272" rx="12" fill="url(#${p}b)" stroke="${C.gray[2]}" stroke-width="6" stroke-miterlimit="10"/>` +
      `<rect x="132" y="148" width="208" height="272" rx="12" fill="url(#${p}f)" stroke="${C.slate[2]}" stroke-width="6" stroke-miterlimit="10"/>` +
      `<path d="M168 220h136m-136 44h112m-112 44h136m-136 44h100" fill="none" stroke="${C.fog[0]}" stroke-width="6" stroke-linecap="round"/>`
    };
  }},

  // OBJECT: Fish — sage body + tail + eye
  fishoftheday: { label:'Fish of the Day', cat:'Internet', icon:(p) => {
    const d = gr(p,'a',...gc(148,180,232,152),C.sage);
    return { defs:d, body:
      `<ellipse cx="280" cy="256" rx="112" ry="72" fill="url(#${p}a)" stroke="${C.sage[2]}" stroke-width="6" stroke-miterlimit="10"/>` +
      `<path d="M168 256l-60-48v96Z" fill="${C.sage[0]}" stroke="${C.sage[2]}" stroke-width="4" stroke-linejoin="round"/>` +
      `<circle cx="340" cy="240" r="14" fill="${C.white[0]}" stroke="${C.dark[0]}" stroke-width="4" stroke-miterlimit="10"/>` +
      `<circle cx="344" cy="236" r="6" fill="${C.dark[0]}"/>`
    };
  }},

  // OBJECT: Magnifying glass (teal, sw 12) + fish inside + gray handle
  fishfinder: { label:'Fish Finder', cat:'Internet', icon:(p) => {
    const d = gr(p,'a',...gc(72,72,228,228),C.teal);
    return { defs:d, body:
      `<circle cx="186" cy="186" r="114" fill="url(#${p}a)" stroke="${C.teal[2]}" stroke-width="12" stroke-miterlimit="10"/>` +
      `<ellipse cx="196" cy="186" rx="40" ry="24" fill="${C.sage[0]}" stroke="${C.sage[2]}" stroke-width="4" stroke-miterlimit="10"/>` +
      `<path d="M156 186l-20-16v32Z" fill="${C.sage[0]}" stroke="${C.sage[2]}" stroke-width="3" stroke-linejoin="round"/>` +
      `<line x1="272" y1="272" x2="400" y2="400" stroke="${C.gray[2]}" stroke-width="40" stroke-linecap="round"/>`
    };
  }},

  // SCENE: Tank (ice, sw 6) + teal water + 2 fish
  aquarium: { label:'Virtual Aquarium', cat:'Internet', icon:(p) => {
    const d = gr(p,'t',...gc(104,132,304,248),C.ice) + gr(p,'w',...gc(104,220,304,154),C.teal);
    return { defs:d, body:
      `<rect x="104" y="132" width="304" height="248" rx="16" fill="url(#${p}t)" stroke="${C.ice[2]}" stroke-width="6" stroke-miterlimit="10"/>` +
      `<rect x="110" y="220" width="292" height="154" rx="10" fill="url(#${p}w)"/>` +
      `<ellipse cx="196" cy="284" rx="28" ry="18" fill="${C.sage[0]}" stroke="${C.sage[2]}" stroke-width="3" stroke-miterlimit="10"/>` +
      `<ellipse cx="336" cy="324" rx="32" ry="20" fill="${C.sun[0]}" stroke="${C.sun[2]}" stroke-width="3" stroke-miterlimit="10"/>`
    };
  }},

  // INSTRUMENT: Radar — gray face + crosshairs (sw 6) + green blips
  neotracker: { label:'NEO Tracker', cat:'Internet', icon:(p) => {
    const d = instGrad(p);
    return { defs:d, body:
      instCircle(p) +
      `<circle cx="256" cy="256" r="92" fill="none" stroke="#9ca3af" stroke-width="4"/>` +
      `<path d="M256 112v288M112 256h288" fill="none" stroke="#9ca3af" stroke-width="6"/>` +
      `<circle cx="300" cy="216" r="14" fill="${C.green[0]}" stroke="${C.green[2]}" stroke-width="4" stroke-miterlimit="10"/>` +
      `<circle cx="224" cy="300" r="10" fill="${C.green[0]}" stroke="${C.green[2]}" stroke-width="3" stroke-miterlimit="10"/>`
    };
  }},

  // INSTRUMENT: Globe (teal, sw 12 bezel) + white lines + red pin
  visitormap: { label:'Visitor Map', cat:'Internet', icon:(p) => {
    const d = cInstGrad(p, 'a', C.teal) + gr(p,'p',...gc(220,168,72,104),C.red);
    return { defs:d, body:
      cInstCircle(p, 'a') +
      `<ellipse cx="256" cy="256" rx="52" ry="132" fill="none" stroke="#e5e7eb" stroke-width="4"/>` +
      `<path d="M118 216h276m-276 80h276" fill="none" stroke="#e5e7eb" stroke-width="4"/>` +
      `<path d="M292 224c0-20-16-36-36-36s-36 16-36 36c0 36 36 56 36 56s36-36 36-56Z" fill="url(#${p}p)" stroke="${C.red[2]}" stroke-width="4" stroke-miterlimit="10"/>` +
      `<circle cx="256" cy="222" r="10" fill="#fff"/>`
    };
  }},

  // OBJECT: Speech bubble — steel body (sw 6) + white text lines (sw 8)
  chat: { label:'Chat', cat:'Internet', icon:(p) => {
    const d = gr(p,'a',...gc(108,124,296,244),C.steel);
    return { defs:d, body:
      `<path d="M156 132h200a44 44 0 0144 44v108a44 44 0 01-44 44H232l-56 48v-48h-20a44 44 0 01-44-44V176a44 44 0 0144-44Z" fill="url(#${p}a)" stroke="${C.steel[2]}" stroke-width="6" stroke-miterlimit="10"/>` +
      `<path d="M196 204h120m-120 44h96" fill="none" stroke="${C.white[0]}" stroke-width="8" stroke-linecap="round"/>`
    };
  }},

  // ── Games ───────────────────────────────────────────────────────

  // INSTRUMENT: Target — rose face + white ring + rose center + crosshairs (sw 6)
  ontarget: { label:'On Target', cat:'Games', icon:(p) => {
    const d = cInstGrad(p, 'a', C.rose) + gr(p,'b',...gc(160,160,192,192),C.white);
    return { defs:d, body:
      cInstCircle(p, 'a') +
      `<circle cx="256" cy="256" r="96" fill="url(#${p}b)" stroke="${C.gray[2]}" stroke-width="6" stroke-miterlimit="10"/>` +
      `<circle cx="256" cy="256" r="48" fill="${C.rose[0]}" stroke="${C.rose[2]}" stroke-width="6" stroke-miterlimit="10"/>` +
      `<path d="M256 100v312M100 256h312" fill="none" stroke="${C.dark[0]}" stroke-width="6"/>`
    };
  }},

  // OBJECT: Chicken — gold round body + red comb + eye + beak
  chickenfingers: { label:'Chicken Fingers', cat:'Games', icon:(p) => {
    const d = gr(p,'a',...gc(136,140,240,232),C.sun);
    return { defs:d, body:
      `<circle cx="256" cy="256" r="112" fill="url(#${p}a)" stroke="${C.sun[2]}" stroke-width="6" stroke-miterlimit="10"/>` +
      `<path d="M232 144c0-20 10-32 24-32s24 12 24 32" fill="${C.red[0]}" stroke="${C.red[2]}" stroke-width="4" stroke-miterlimit="10"/>` +
      `<circle cx="220" cy="232" r="12" fill="${C.dark[0]}"/>` +
      `<path d="M188 272h-40l-8 16 48-4Z" fill="${C.amber[1]}" stroke="${C.amber[2]}" stroke-width="4" stroke-linejoin="round"/>`
    };
  }},

  // SCENE: Dark field (slate, sw 6) + 3 colored bricks + ball
  brickbreaker: { label:'Brick Breaker', cat:'Games', icon:(p) => {
    const d = gr(p,'bg',...gc(112,132,288,248),C.slate);
    return { defs:d, body:
      `<rect x="112" y="132" width="288" height="248" rx="16" fill="url(#${p}bg)" stroke="${C.slate[2]}" stroke-width="6" stroke-miterlimit="10"/>` +
      `<rect x="132" y="164" width="92" height="36" rx="8" fill="${C.rose[0]}" stroke="${C.rose[2]}" stroke-width="3" stroke-miterlimit="10"/>` +
      `<rect x="236" y="164" width="92" height="36" rx="8" fill="${C.sun[0]}" stroke="${C.sun[2]}" stroke-width="3" stroke-miterlimit="10"/>` +
      `<rect x="132" y="212" width="92" height="36" rx="8" fill="${C.sage[0]}" stroke="${C.sage[2]}" stroke-width="3" stroke-miterlimit="10"/>` +
      `<circle cx="256" cy="320" r="12" fill="${C.white[0]}" stroke="${C.gray[2]}" stroke-width="3" stroke-miterlimit="10"/>`
    };
  }},

  // INSTRUMENT: Fractal — plum face + #e5e7eb bezel + concentric rings
  fractalexplorer: { label:'Fractal Explorer', cat:'Games', icon:(p) => {
    const d = cInstGrad(p, 'a', C.plum);
    return { defs:d, body:
      cInstCircle(p, 'a') +
      `<circle cx="256" cy="256" r="100" fill="none" stroke="#e5e7eb" stroke-width="4"/>` +
      `<circle cx="256" cy="256" r="60" fill="none" stroke="${C.ice[2]}" stroke-width="4"/>` +
      `<circle cx="256" cy="256" r="24" fill="${C.ice[0]}" stroke="${C.ice[2]}" stroke-width="4" stroke-miterlimit="10"/>`
    };
  }},

  // OBJECT: Slot machine — amber body (sw 6) + 3 white windows
  slotmachine: { label:'Slot Machine', cat:'Games', icon:(p) => {
    const d = gr(p,'a',...gc(120,148,272,216),C.amber);
    return { defs:d, body:
      `<rect x="120" y="148" width="272" height="216" rx="16" fill="url(#${p}a)" stroke="${C.amber[2]}" stroke-width="6" stroke-miterlimit="10"/>` +
      `<rect x="148" y="180" width="60" height="108" rx="8" fill="${C.white[0]}" stroke="${C.gray[2]}" stroke-width="4" stroke-miterlimit="10"/>` +
      `<rect x="226" y="180" width="60" height="108" rx="8" fill="${C.white[0]}" stroke="${C.gray[2]}" stroke-width="4" stroke-miterlimit="10"/>` +
      `<rect x="304" y="180" width="60" height="108" rx="8" fill="${C.white[0]}" stroke="${C.gray[2]}" stroke-width="4" stroke-miterlimit="10"/>`
    };
  }},

  // ── Audio ───────────────────────────────────────────────────────

  // ABSTRACT: 4 fader tracks (sw 6) + 2 slider knobs
  noisemixer: { label:'Noise Mixer', cat:'Audio', icon:(p) => {
    const d = gr(p,'1',148,136,188,378,C.gray) + gr(p,'2',218,136,258,378,C.gray) +
      gr(p,'3',288,136,328,378,C.gray) + gr(p,'4',358,136,398,378,C.gray);
    return { defs:d, body:
      `<line x1="168" y1="148" x2="168" y2="364" stroke="url(#${p}1)" stroke-width="6" stroke-linecap="round"/>` +
      `<line x1="238" y1="148" x2="238" y2="364" stroke="url(#${p}2)" stroke-width="6" stroke-linecap="round"/>` +
      `<line x1="308" y1="148" x2="308" y2="364" stroke="url(#${p}3)" stroke-width="6" stroke-linecap="round"/>` +
      `<line x1="378" y1="148" x2="378" y2="364" stroke="url(#${p}4)" stroke-width="6" stroke-linecap="round"/>` +
      `<rect x="152" y="212" width="32" height="24" rx="6" fill="${C.gray[0]}" stroke="${C.gray[2]}" stroke-width="4" stroke-miterlimit="10"/>` +
      `<rect x="222" y="272" width="32" height="24" rx="6" fill="${C.gray[0]}" stroke="${C.gray[2]}" stroke-width="4" stroke-miterlimit="10"/>`
    };
  }},

  // ABSTRACT: Tuning fork — U-shape + stem (stroke-width 24, like wind)
  tuningfork: { label:'Tuning Fork', cat:'Audio', icon:(p) => {
    const d = gr(p,'a',...gc(192,122,128,270),C.gray);
    return { defs:d, body:
      `<path d="M212 128v160a34 34 0 0034 34h20a34 34 0 0034-34V128" fill="none" stroke="url(#${p}a)" stroke-width="24" stroke-linecap="round"/>` +
      `<line x1="256" y1="322" x2="256" y2="396" stroke="url(#${p}a)" stroke-width="24" stroke-linecap="round"/>`
    };
  }},

  // ABSTRACT: 2 wave paths (stroke-width 24, like wind curves)
  reverb: { label:'Reverb', cat:'Audio', icon:(p) => {
    const d = gr(p,'1',104,136,408,296,C.ice) + gr(p,'2',104,216,408,376,C.teal);
    return { defs:d, body:
      `<path d="M104 220q52-84 104 0t104 0 104 0" fill="none" stroke="url(#${p}1)" stroke-width="24" stroke-linecap="round"/>` +
      `<path d="M104 296q52-64 104 0t104 0 104 0" fill="none" stroke="url(#${p}2)" stroke-width="24" stroke-linecap="round"/>`
    };
  }},

  // ABSTRACT: wave (sw 24) + 3 knobs
  soundproducer: { label:'Sound Producer', cat:'Audio', icon:(p) => {
    const d = gr(p,'w',104,172,408,296,C.teal);
    return { defs:d, body:
      `<path d="M104 236q44-84 88 0t88 0 88 0 88 0" fill="none" stroke="url(#${p}w)" stroke-width="24" stroke-linecap="round"/>` +
      `<circle cx="166" cy="336" r="20" fill="${C.rose[0]}" stroke="${C.rose[2]}" stroke-width="4" stroke-miterlimit="10"/>` +
      `<circle cx="256" cy="336" r="20" fill="${C.sage[0]}" stroke="${C.sage[2]}" stroke-width="4" stroke-miterlimit="10"/>` +
      `<circle cx="346" cy="336" r="20" fill="${C.sun[0]}" stroke="${C.sun[2]}" stroke-width="4" stroke-miterlimit="10"/>`
    };
  }},

  // ── Accessories ─────────────────────────────────────────────────

  // OBJECT: Palette ellipse (sw 6) + 3 color dots + thumb hole
  paint: { label:'Paint', cat:'Accessories', icon:(p) => {
    const d = gr(p,'a',...gc(100,132,312,248),C.amber);
    return { defs:d, body:
      `<ellipse cx="256" cy="256" rx="156" ry="120" fill="url(#${p}a)" stroke="${C.amber[2]}" stroke-width="6" stroke-miterlimit="10"/>` +
      `<circle cx="196" cy="200" r="20" fill="${C.rose[0]}" stroke="${C.rose[2]}" stroke-width="3" stroke-miterlimit="10"/>` +
      `<circle cx="272" cy="188" r="20" fill="${C.steel[0]}" stroke="${C.steel[2]}" stroke-width="3" stroke-miterlimit="10"/>` +
      `<circle cx="340" cy="216" r="20" fill="${C.sage[0]}" stroke="${C.sage[2]}" stroke-width="3" stroke-miterlimit="10"/>` +
      `<circle cx="160" cy="268" r="28" fill="${C.white[0]}" stroke="${C.gray[2]}" stroke-width="4" stroke-miterlimit="10"/>`
    };
  }},

  // OBJECT: Camera — gray body (sw 6) + slate lens + ice inner
  photobooth: { label:'Photo Booth', cat:'Accessories', icon:(p) => {
    const d = gr(p,'a',...gc(108,164,296,196),C.gray) + gr(p,'l',...gc(192,200,128,128),C.slate);
    return { defs:d, body:
      `<rect x="108" y="168" width="296" height="192" rx="16" fill="url(#${p}a)" stroke="${C.gray[2]}" stroke-width="6" stroke-miterlimit="10"/>` +
      `<rect x="204" y="136" width="104" height="40" rx="10" fill="${C.gray[0]}" stroke="${C.gray[2]}" stroke-width="4" stroke-miterlimit="10"/>` +
      `<circle cx="256" cy="268" r="60" fill="url(#${p}l)" stroke="${C.slate[2]}" stroke-width="6" stroke-miterlimit="10"/>` +
      `<circle cx="256" cy="268" r="32" fill="${C.ice[0]}" stroke="${C.ice[2]}" stroke-width="4" stroke-miterlimit="10"/>`
    };
  }},

  // ── Utilities ───────────────────────────────────────────────────

  // SCENE: Standalone sun (matches production Weather app icon)
  weather: { label:'Weather', cat:'Utilities', icon:(p) => {
    const d = WG.sun(p) + WS.sun(p);
    return { defs:d, body:
      `<use href="#${p}s" width="340" height="340" transform="translate(86 86)"/>`
    };
  }},

  // INSTRUMENT: Clock/globe — teal face + #e5e7eb bezel + white hands (sw 12)
  timezone: { label:'Time Zone', cat:'Utilities', icon:(p) => {
    const d = cInstGrad(p, 'a', C.teal);
    return { defs:d, body:
      cInstCircle(p, 'a') +
      `<ellipse cx="256" cy="256" rx="52" ry="132" fill="none" stroke="#e5e7eb" stroke-width="4"/>` +
      `<line x1="112" y1="256" x2="400" y2="256" stroke="#e5e7eb" stroke-width="4"/>` +
      `<path d="M256 148v108l64 44" fill="none" stroke="#fff" stroke-width="12" stroke-linecap="round" stroke-linejoin="round"/>` +
      `<circle cx="256" cy="256" r="12" fill="#fff" stroke="${C.teal[2]}" stroke-width="4" stroke-miterlimit="10"/>`
    };
  }},

  // OBJECT: Disk platter — gray ellipse (sw 6) + dark hub + arm (sw 8)
  diskusage: { label:'Disk Usage', cat:'Utilities', icon:(p) => {
    const d = gr(p,'a',...gc(104,160,304,192),C.gray);
    return { defs:d, body:
      `<ellipse cx="256" cy="256" rx="152" ry="96" fill="url(#${p}a)" stroke="${C.gray[2]}" stroke-width="6" stroke-miterlimit="10"/>` +
      `<circle cx="256" cy="256" r="36" fill="${C.dark[0]}" stroke="${C.dark[2]}" stroke-width="4" stroke-miterlimit="10"/>` +
      `<circle cx="256" cy="256" r="12" fill="${C.gray[0]}"/>` +
      `<line x1="256" y1="256" x2="372" y2="196" stroke="${C.dark[0]}" stroke-width="8" stroke-linecap="round"/>`
    };
  }},

  // INSTRUMENT: Stopwatch — gray face (sw 12 bezel) + white inner + dark hands (sw 12) + red hub
  stopwatch: { label:'Stopwatch', cat:'Utilities', icon:(p) => {
    const d = gr(p,'a',184,143,328,393,C.dark) + gr(p,'f',...gc(128,140,256,256),C.white);
    return { defs:d, body:
      `<circle cx="256" cy="268" r="140" fill="url(#${p}a)" stroke="#e5e7eb" stroke-miterlimit="10" stroke-width="12"/>` +
      `<circle cx="256" cy="268" r="116" fill="url(#${p}f)" stroke="${C.gray[2]}" stroke-width="4" stroke-miterlimit="10"/>` +
      `<rect x="240" y="100" width="32" height="36" rx="8" fill="${C.gray[0]}" stroke="${C.gray[2]}" stroke-width="4" stroke-miterlimit="10"/>` +
      `<path d="M256 268v-88M256 268l60 36" fill="none" stroke="${C.dark[0]}" stroke-width="12" stroke-linecap="round"/>` +
      `<circle cx="256" cy="268" r="12" fill="${C.red[0]}" stroke="${C.red[2]}" stroke-width="4" stroke-miterlimit="10"/>`
    };
  }},

  // OBJECT: Microphone — gray capsule (sw 6) + arc (sw 12) + stand (sw 12)
  voicecommands: { label:'Voice Commands', cat:'Utilities', icon:(p) => {
    const d = gr(p,'a',...gc(200,120,112,168),C.gray);
    return { defs:d, body:
      `<rect x="200" y="120" width="112" height="168" rx="56" fill="url(#${p}a)" stroke="${C.gray[2]}" stroke-width="6" stroke-miterlimit="10"/>` +
      `<path d="M168 288a88 88 0 00176 0" fill="none" stroke="${C.gray[2]}" stroke-width="12" stroke-linecap="round"/>` +
      `<line x1="256" y1="376" x2="256" y2="408" stroke="${C.gray[2]}" stroke-width="12" stroke-linecap="round"/>` +
      `<line x1="208" y1="408" x2="304" y2="408" stroke="${C.gray[2]}" stroke-width="12" stroke-linecap="round"/>`
    };
  }},

  // OBJECT: Lock — silver shackle (sw 24) + gold body (sw 6) + keyhole
  cryptography: { label:'Cryptography', cat:'Utilities', icon:(p) => {
    const d = gr(p,'a',...gc(148,228,216,160),C.sun);
    return { defs:d, body:
      `<path d="M184 240a72 72 0 01144 0" fill="none" stroke="${C.gray[2]}" stroke-width="24" stroke-linecap="round"/>` +
      `<rect x="148" y="240" width="216" height="156" rx="16" fill="url(#${p}a)" stroke="${C.sun[2]}" stroke-width="6" stroke-miterlimit="10"/>` +
      `<circle cx="256" cy="300" r="18" fill="${C.amber[1]}" stroke="${C.amber[2]}" stroke-width="4" stroke-miterlimit="10"/>` +
      `<line x1="256" y1="318" x2="256" y2="360" stroke="${C.amber[1]}" stroke-width="8" stroke-linecap="round"/>`
    };
  }},
};

function appIcon(key, size) {
  const p = 'a' + (_n++) + '-';
  const r = APPS[key].icon(p);
  return mkSvg(p, r.defs, r.body, size);
}

// ══════════════════════════════════════════════════════════════════════
// RENDERING
// ══════════════════════════════════════════════════════════════════════

function weatherRow(size) {
  return Object.keys(WEATHER).map(k =>
    `<div class="cell">${weatherIcon(k, size)}<span>${WEATHER[k].label}</span></div>`
  ).join('');
}

function appRow(keys, size) {
  return keys.map(k =>
    `<div class="cell">${appIcon(k, size)}<span>${APPS[k].label}</span></div>`
  ).join('');
}

const cats = {};
for (const [k,v] of Object.entries(APPS)) {
  if (!cats[v.cat]) cats[v.cat] = [];
  cats[v.cat].push(k);
}

const paletteColors = ['sun','ice','red','green','gray','dark','steel','teal','amber','sage','rose','plum','white','fog','slate'];
const paletteHtml = paletteColors.map(name => {
  const c = C[name];
  return `<div class="swatch" style="background:linear-gradient(135deg,${c[0]} 50%,${c[1]} 100%)">${name}</div>`;
}).join('');

// Build category index
const catNames = Object.keys(cats);
const tocLinks = catNames.map(c => `<a href="#cat-${c.toLowerCase().replace(/\s+/g,'-')}">${c}</a>`).join('') +
  `<a href="icon-test-weather.html">Weather (animated) &rarr;</a>`;

let html = `
  <div class="toc">${tocLinks}</div>
  <h2>Color Palette</h2>
  <div class="palette">${paletteHtml}</div>
`;

for (const [cat, keys] of Object.entries(cats)) {
  const id = cat.toLowerCase().replace(/\s+/g, '-');
  html += `
  <div class="divider"></div>
  <h2 id="cat-${id}">${cat}</h2>
  <h3>48px — desktop</h3>
  <div class="desktop-bg"><div class="grid">${appRow(keys, 48)}</div></div>
  <h3>20px — start menu</h3>
  <div class="chrome-bg"><div class="grid">${appRow(keys, 20)}</div></div>
  <h3>16px — taskbar</h3>
  <div class="chrome-bg"><div class="grid">${appRow(keys, 16)}</div></div>
  `;
}

document.getElementById('icons').innerHTML = html;
</script>

</body>
</html>
